<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Robotics Learning App</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <style>
    body {
      margin: 0;
      font-family: Arial, sans-serif;
      background: #f3f4f6;
    }

    header {
      background: #2563eb;
      color: white;
      padding: 16px;
    }

    nav button {
      margin-right: 10px;
      padding: 8px 12px;
      border: none;
      background: white;
      color: #2563eb;
      font-weight: bold;
      cursor: pointer;
      border-radius: 6px;
    }

    main {
      padding: 20px;
    }

    .card {
      background: white;
      padding: 16px;
      border-radius: 8px;
      margin-bottom: 16px;
    }

    /* ROBOT STYLES */
    .robot-container {
      position: relative;
      height: 120px;
      margin-top: 20px;
      border: 1px dashed #ccc;
    }

    .robot {
      width: 60px;
      height: 60px;
      background: #f97316;
      border-radius: 10px;
      position: absolute;
      left: 0;
      top: 30px;
      transition: left 0.3s;
    }

    .eye {
      width: 8px;
      height: 8px;
      background: black;
      border-radius: 50%;
      position: absolute;
      top: 15px;
    }

    .eye.left {
      left: 15px;
    }

    .eye.right {
      right: 15px;
    }
  </style>
</head>

<body>

<header>
  <h2>Robotics Learning App</h2>
  <nav>
    <button onclick="showPage('home')">Home</button>
    <button onclick="showPage('learn')">Learn</button>
    <button onclick="showPage('simulator')">Simulator</button>
  </nav>
</header>

<main id="content"></main>

<script>
  const content = document.getElementById("content");

  // Save/load progress
  function saveProgress(key, value) {
    localStorage.setItem(key, value);
  }

  function getProgress(key) {
    return localStorage.getItem(key);
  }

  // Navigation Pages
  function showPage(page) {
    if (page === "home") {
      const completed = getProgress("lesson1") === "done";
      content.innerHTML = `
        <div class="card">
          <h2>Welcome üëã</h2>
          <p>Learn robotics step by step.</p>
          <p><strong>Lesson 1:</strong> ${completed ? "‚úÖ Completed" : "‚ùå Not completed"}</p>
        </div>
      `;
    }

    if (page === "learn") {
      content.innerHTML = `
        <div class="card">
          <h2>Lesson 1: What is a Robot?</h2>
          <p>A robot is a machine that can:</p>
          <ul>
            <li>Sense the world</li>
            <li>Make decisions</li>
            <li>Move using motors</li>
          </ul>
          <button onclick="showQuiz()">Take Quiz</button>
        </div>
      `;
    }

    if (page === "simulator") {
      content.innerHTML = `
        <div class="card">
          <h2>Robot Simulator ü§ñ</h2>
          <p>Control the robot using buttons or watch it react to edges.</p>

          <div class="robot-container">
            <div id="robot" class="robot">
              <div class="eye left"></div>
              <div class="eye right"></div>
            </div>
          </div>

          <br>
          <button onclick="moveRobot('left')">‚¨ÖÔ∏è Left</button>
          <button onclick="moveRobot('right')">‚û°Ô∏è Right</button>
          <button onclick="moveRobot('stop')">‚èπ Stop</button>
        </div>
      `;
    }
  }

  // Quiz
  function showQuiz() {
    content.innerHTML = `
      <div class="card">
        <h2>Quiz: What is a Robot?</h2>
        <p>Which one is a robot?</p>

        <button onclick="checkAnswer(false)">A rock</button><br><br>
        <button onclick="checkAnswer(true)">A machine with sensors and motors</button><br><br>
        <button onclick="checkAnswer(false)">A book</button>
      </div>
    `;
  }

  function checkAnswer(correct) {
    if (correct) {
      saveProgress("lesson1", "done");
      content.innerHTML = `
        <div class="card">
          <h2>‚úÖ Correct!</h2>
          <p>You completed Lesson 1.</p>
          <button onclick="showPage('home')">Go Home</button>
        </div>
      `;
    } else {
      alert("‚ùå Try again!");
    }
  }

  // Robot movement + sensor
  let position = 0;
  let moving;

  function autoStopSensor() {
    const robot = document.getElementById("robot");
    const container = document.querySelector(".robot-container");
    const maxPosition = container.offsetWidth - robot.offsetWidth;

    if (position >= maxPosition) {
      clearInterval(moving);
      alert("‚ö†Ô∏è Robot stopped: sensor detected a wall!");
    }

    if (position <= 0) {
      clearInterval(moving);
      alert("‚ö†Ô∏è Robot stopped: sensor detected a wall!");
    }
  }

  function moveRobot(direction) {
    const robot = document.getElementById("robot");
    const container = document.querySelector(".robot-container");
    const maxPosition = container.offsetWidth - robot.offsetWidth;

    clearInterval(moving);

    if (direction === "left") {
      moving = setInterval(() => {
        position = Math.max(0, position - 10);
        robot.style.left = position + "px";
        autoStopSensor();
      }, 300);
    }

    if (direction === "right") {
      moving = setInterval(() => {
        position = Math.min(maxPosition, position + 10);
        robot.style.left = position + "px";
        autoStopSensor();
      }, 300);
    }

    if (direction === "stop") {
      clearInterval(moving);
    }
  }

  // Load home page by default
  showPage("home");
</script>

</body>
</html>
